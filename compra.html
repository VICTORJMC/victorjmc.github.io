<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="app.css">
    <style>
    h1{
        font-size: 2.5em; 
    }
    b{
       padding-right:120px;

    }
    li{
    list-style:none;
    text-transform: uppercase;
    }
    body {
  margin: 0;
  background-color: #2f3238;
  font-family: sans-serif;
  color: #ccc;
  user-select: none;
  }
  .button {
  background: orangered;
  border: none;
  padding: 0.2rem 0.8rem;
  border-radius: 15px;
  color: #ccc;
  cursor: pointer;
  margin: 1rem 0;
  font-size: 3em;
}
  input {
  font-size: 3em;
  margin-left: 25px;
}

    </style>
    <title>Local Storage Exercise</title>
</head>
<body>

<div class="container">
 <h1>LISTA DE LA COMPRA</h1><hr>
    <ul class="myTasks">

    </ul>

    <form class="taskAdder">
         <input type="submit" class="button" value=" üõíCOMPRA">
        <input list="browsers" name="task"  placeholder="Art√≠culos" required>
         <datalist id="browsers">
             <option value="üç´CHOCOLATE">
             <option value="ü•§COCA-COLA">
             <option value="üíßAGUA">
             <option value="ü•õLECHE">
             <option value="üç™GALLETAS">
             <option value="ü•úFRUTOS SECOS">
             <option value="üçèManzanas">
             <option value="üçåPlatanos">
             <option value="üçàLimones">
             <option value="üçäNaranjas">
             <option value="üçÉLima">
             <option value="üçëMelocoton">
             <option value="üçáUvas">
             <option value="üççPi√±a">
             <option value="üçâSandia">
             <option value="ü´íACEITE-AOVE">
             <option value="ü•ëAguacate">
             <option value="üßÖCebolla">
             <option value="ü•¨Lechuga">
             <option value="ü´ëPimiento">
             <option value="üçÖTomates">
             <option value="ü•ïZanahorias">
             <option value="üçÑChampi√±ones">
             <option value="üå∂Ô∏èJalape√±os">
             <option value="ü•îPatatas">
             <option value="ü´íACEITUNAS NEGRAS">
             <option value="üå∞Lentejas">
             <option value="ü•¶Guisantes">
             <option value="ü•öHUEVOS">
             <option value="üçóPOLLO">
             <option value="üçñPAVO">
             <option value="üçûPAN INTEGRAL">
             <option value="üçöARROZ">
             <option value="üçùPASTA">
             <option value="üßãYOGURT">
             <option value="üßÄQUESO">
             <option value="üßªRollo Cocina">
             <option value="üßªHiji√©nico">
             <option value="üß¥CHAMP√ö">
             <option value="üöÆBOLSA BASURA">
             <option value="üß∑PA√ëALES">
             <option value="üìúTOALLITAS">
             <option value="ü•£AVENA">
             <option value="‚òïCAFE">
         </datalist>
       
    </form>
   
        

</div>
  
    
    <script>
const taskAdder = document.querySelector('.taskAdder');
const myTasks = document.querySelector('.myTasks');
// or || ou
const tasks = JSON.parse(localStorage.getItem('taskList')) || [];

taskAdder.addEventListener('submit', addTask);
myTasks.addEventListener('click', toggleDone);
outputTasks();


function addTask(e){
    e.preventDefault();
    const textTask = this.querySelector('[name=task]').value;
    const task = {
        textTask,done:false
    }
//    console.log(textTask);
    tasks.push(task);
    saveStorage();
    outputTasks();
//    console.log(tasks);
    this.reset();
}

function saveStorage(){
    // espera dois parametros, nome e valor
    localStorage.setItem('taskList',JSON.stringify(tasks));
}

function outputTasks() {
    let html = tasks.map(function(data,i) {
        let myClass = data.done ? 'done' : '';
        return '<h1><li data-index='+i+'><div class="'+myClass+'">'+'<b class="remove">‚ùå</b>'+
            data.textTask+'</div></li></h1><hr>';
    })
//    html = html.join('');
//    console.log(html);
    myTasks.innerHTML = html.join('');
}

function toggleDone(e) {
    //console.log(e);
    // mudar o dom - para nao realizar reload sempre do dom todo
    const myEl = e.target;
    const mySel = myEl.parentElement;
    if(myEl.className === 'remove') {
        let index = mySel.parentElement.dataset.index;
        let temp = tasks.splice(index,1);
        console.log(temp);
    } else {
    //    console.log(e);
    //    console.log(tasks[mySel]);
        myEl.classList.toggle('done');
    //    console.log(myEl);
        tasks[mySel.dataset.index].done = !tasks[mySel.dataset.index].done;
    }
//    console.log(tasks);
    // reload to propagate
    // recarregar para propagar as mudan√ßas
    //outputTasks();
    saveStorage();
    outputTasks();
}


// exemplo de map
//var testArray = [3,5,7];
//var testDouble = testArray.map(function(data){
//    console.log(data);
//    return data * 5;
//})
//console.log(testDouble);
    </script>
</body>
</html>
